(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"4AsZ":function(e,t,a){},CN8t:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=c(a("Yz+Y")),n=c(a("iCc5")),l=c(a("V7oC")),i=c(a("FYw3")),r=c(a("mRg0")),s=c(a("q1tI"));c(a("17x9"));a("PrFZ");var u=a("i6OX"),d=c(u);function c(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(e){(0,n.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));a.choose=function(e){a.setState({pathname:e},function(){a.props.history.push(e)})};var l=localStorage.getItem("shopInfo")?JSON.parse(localStorage.getItem("shopInfo")):{};return a.state={pathname:e.location.pathname,shopInfo:l},a}return(0,r.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.pathname,o=t.shopInfo;return s.default.createElement("div",null,3!==o.merInfoTemplates.visitType?s.default.createElement("div",{className:"footer-bg clearfix"},s.default.createElement("div",{className:"/"===a?"item active":"item",onClick:function(){e.choose("/")}},s.default.createElement(d.default,{glyph:u.home}),"首页"),s.default.createElement("div",{className:"/my"===a?"item active":"item",onClick:function(){e.choose("/my")}},s.default.createElement(d.default,{glyph:u.user}),"我的")):"")}}]),t}(s.default.Component);t.default=f},Fzi1:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,n=a("CN8t"),l=(o=n)&&o.__esModule?o:{default:o};t.default=l.default},MG2k:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=b(a("3UyF")),n=b(a("LajT")),l=b(a("NtIf")),i=b(a("QbLZ")),r=b(a("gDS+")),s=b(a("Kl5d")),u=b(a("YEIV")),d=b(a("Yz+Y")),c=b(a("iCc5")),f=b(a("V7oC")),m=b(a("FYw3")),p=b(a("mRg0"));a("RhWh"),a("BXRl"),a("9prx"),a("TttT");var h=b(a("q1tI")),g=a("MuoO"),v=(b(a("17x9")),a("sd4h")),C=a("i6OX"),I=b(C);function b(e){return e&&e.__esModule?e:{default:e}}a("4AsZ");var y=/^1(3|4|5|6|7|8|9)\d{9}$/,S=null,k=function(e){function t(e){(0,c.default)(this,t);var a=(0,m.default)(this,(t.__proto__||(0,d.default)(t)).call(this,e));return a.changeInput=function(e,t){a.setState((0,u.default)({},t,e))},a.onLogin=function(){var e=a.state,t=e.mobile,o=e.code;if(!y.test(t))return alert("请输入正确的手机号码！");var n={mobile:t.replace(/\s/g,""),verCode:o};(0,a.props.dispatch)({type:"login/touristlogin",payload:n})},a.sendCode=function(){var e=a;a.setState({sendCodeTime:60}),S=setInterval(function(){var t=a.state.sendCodeTime;1===t&&clearInterval(S),t-=1,e.setState({sendCodeTime:t})},1e3)},a.sendSmsCode=function(){var e=a.state.mobile;y.test(e)?(0,a.props.dispatch)({type:"login/getCode",payload:{mobile:e.replace(/\s/g,""),loginKey:"login"}}):alert("请输入正确的手机号码！")},a.state={mobile:"",code:"",sendCodeTime:0},a}return(0,p.default)(t,e),(0,f.default)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this.props,a=e.login,o=a.touristlogin,n=a.getCode;if(n!==t.login.getCode){var l=n.code,i=n.message;"1000"===l?(this.sendCode(),s.default.info("验证码已发送至"+this.state.mobile)):s.default.fail(i)}if(o!==this.props.login.touristlogin){var u=o.code,d=o.message,c=o.data;"1000"===u?(s.default.success("登录成功！"),localStorage.setItem("userInfo",(0,r.default)(c)),this.props.loginSuccess(c),window.location.href=window.location.href):s.default.fail(d)}}},{key:"componentWillUnmount",value:function(){clearInterval(S)}},{key:"render",value:function(){var e=this,t=this.props.form.getFieldProps,a=this.state,r=a.mobile,s=a.code,u=a.sendCodeTime;return h.default.createElement(o.default,{className:localStorage.getItem("theme")||"",visible:!0,transparent:!1,maskClosable:!1,footer:[],wrapProps:{onTouchStart:this.onWrapTouchStart},afterClose:function(){alert("afterClose")}},h.default.createElement("div",{className:"login-modal"},h.default.createElement("div",{className:"banner"},h.default.createElement("div",{className:"head_img"},h.default.createElement(I.default,{glyph:C.user})),h.default.createElement("div",{className:"right-txt"},h.default.createElement("div",{className:"h1"},"登录"),h.default.createElement("div",{className:"h5"},"请输入手机号登录"))),h.default.createElement("div",{className:"login-bg"},h.default.createElement(l.default,(0,i.default)({},t("mobile"),{placeholder:"输入11位手机号",onChange:function(t){e.changeInput(t,"mobile")},value:r,maxLength:"11"})),h.default.createElement(l.default,(0,i.default)({},t("code"),{placeholder:"输入手机验证码",type:"number",maxLength:"4",onChange:function(t){e.changeInput(t,"code")},value:s,extra:h.default.createElement(n.default,{className:"link",onClick:this.sendSmsCode,disabled:!y.test(r)||y.test(r)&&u>1},u>1?h.default.createElement("span",null,"重新获取(",u,"s)"):h.default.createElement("span",null,"获取验证码"))})),h.default.createElement("div",{className:"btn-bg"},h.default.createElement("button",{className:"btn",onClick:this.onLogin},"登录")))))}}]),t}(h.default.Component);t.default=(0,g.connect)(function(e){return(0,i.default)({},e)})((0,v.createForm)()(k))},PrFZ:function(e,t,a){},Upkh:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=C(a("3UyF")),n=C(a("LajT")),l=C(a("NtIf")),i=C(a("QbLZ")),r=C(a("gDS+")),s=C(a("Kl5d")),u=C(a("YEIV")),d=C(a("Yz+Y")),c=C(a("iCc5")),f=C(a("V7oC")),m=C(a("FYw3")),p=C(a("mRg0"));a("RhWh"),a("BXRl"),a("9prx"),a("TttT");var h=C(a("q1tI")),g=a("MuoO"),v=(C(a("17x9")),a("sd4h"));C(a("i6OX"));a("dkPK");C(a("Rnav")),C(a("GBY4")),C(a("Fzi1"));function C(e){return e&&e.__esModule?e:{default:e}}var I=/^1(3|4|5|6|7|8|9)\d{9}$/,b=null,y=function(e){function t(e){(0,c.default)(this,t);var a=(0,m.default)(this,(t.__proto__||(0,d.default)(t)).call(this,e));return a.changeInput=function(e,t){a.setState((0,u.default)({},t,e))},a.onLogin=function(){var e=a.state,t=e.mobile,o=e.code;if(!I.test(t))return s.default.info("请输入正确的手机号码！");if(!o)return s.default.info("请输入验证码！");var n={mobile:t.replace(/\s/g,""),verCode:o};(0,a.props.dispatch)({type:"login/touristlogin",payload:n})},a.sendCode=function(){var e=a;a.setState({sendCodeTime:60}),b=setInterval(function(){var t=a.state.sendCodeTime;1===t&&clearInterval(b),t-=1,e.setState({sendCodeTime:t})},1e3)},a.sendSmsCode=function(){var e=a.state.mobile;if(!I.test(e))return s.default.info("请输入正确的手机号码！");(0,a.props.dispatch)({type:"login/getCode",payload:{mobile:e.replace(/\s/g,""),loginKey:"login"}})},a.onClose=function(){},a.state={mobile:"",code:"",sendCodeTime:0},a}return(0,p.default)(t,e),(0,f.default)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this.props,a=e.login,o=a.touristlogin,n=a.getCode;if(n!==t.login.getCode){var l=n.code,i=n.message;"1000"===l?(this.sendCode(),s.default.info("验证码已发送至"+this.state.mobile)):s.default.fail(i)}if(o!==this.props.login.touristlogin){var u=o.code,d=o.message,c=o.data;"1000"===u?(s.default.success("登录成功！"),localStorage.setItem("userInfo",(0,r.default)(c)),this.props.loginSuccess(c)):s.default.fail(d)}}},{key:"componentWillUnmount",value:function(){clearInterval(b)}},{key:"render",value:function(){var e=this,t=this.props.form.getFieldProps,a=this.state,r=a.mobile,s=a.code,u=a.sendCodeTime;return h.default.createElement(o.default,{className:"mall-login-modal",visible:!0,transparent:!0,width:"6.16rem",maskClosable:!1,closable:!0,onClose:this.props.hideLoginModal,title:"短信验证码登录",footer:[],wrapProps:{onTouchStart:this.onWrapTouchStart},afterClose:function(){alert("afterClose")}},h.default.createElement("div",{className:"login-bg"},h.default.createElement(l.default,(0,i.default)({},t("mobile"),{placeholder:"请输入手机号",onChange:function(t){e.changeInput(t,"mobile")},value:r,onClick:function(e){e.currentTarget.focus()},maxLength:"11"})),h.default.createElement(l.default,(0,i.default)({},t("code"),{placeholder:"输入手机验证码",type:"number",maxLength:"4",onChange:function(t){e.changeInput(t,"code")},value:s,onClick:function(e){e.currentTarget.focus()},extra:h.default.createElement(n.default,{className:"link",onClick:this.sendSmsCode,disabled:!I.test(r)||I.test(r)&&u>1},u>1?h.default.createElement("span",null,"重新获取(",u,"s)"):h.default.createElement("span",null,"获取验证码"))})),h.default.createElement("div",{className:"btn-bg"},h.default.createElement("button",{className:"btn",onClick:this.onLogin},"登录"))))}}]),t}(h.default.Component);t.default=(0,g.connect)(function(e){return(0,i.default)({},e)})((0,v.createForm)()(y))},X4fA:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isLoginOrAuth=t.authorizationFailure=void 0;var o=l(a("gDS+")),n=l(a("1dND"));function l(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=localStorage.getItem("userInfo")?JSON.parse(localStorage.getItem("userInfo")):"",a=localStorage.getItem("shopInfo")?JSON.parse(localStorage.getItem("shopInfo")):"";if(t&&t.fuluToken||3==a.merInfoTemplates.visitType)return!0;var o=n.default.isAlipayOrWechat(),l=window.location.pathname+window.location.search;if(0===o||1===o)return window.location.href=configs.commonUrl+"?codeKey="+a.codeKey+"&backUrl="+encodeURIComponent(l),!1;if(2===a.merInfoTemplates.visitType)return t.fuluId&&!t.fuluToken?e.props.dispatch({type:"login/fuluusertoken",payload:{code:t.fuluId,env:3,type:!0}}):e.setState({showMallLoginModal:!0}),!1;var i=localStorage.getItem("userid"),r=localStorage.getItem("accesstoken"),s=configs.commonUrl+"?codeKey="+a.codeKey+"&backUrl="+encodeURIComponent(l);return i&&(s=s+"&userid="+i),r&&(s=s+"&accesstoken="+r),window.location.href=s,!1}t.authorizationFailure=function(e){var t=e.state.userInfo;t.fuluToken="",localStorage.setItem("userInfo",(0,o.default)(t)),e.setState({userInfo:t},function(){i(e)})},t.isLoginOrAuth=i},dkPK:function(e,t,a){}}]);