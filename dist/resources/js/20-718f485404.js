(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{IHUe:function(e,t,a){},XFOt:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,l,r=E(a("NtIf")),n=E(a("QbLZ")),s=E(a("Kl5d")),c=E(a("Yz+Y")),d=E(a("iCc5")),i=E(a("V7oC")),u=E(a("FYw3")),f=E(a("mRg0"));a("9prx"),a("TttT");var m=E(a("q1tI")),p=a("MuoO"),g=(E(a("17x9")),E(a("Rnav")));E(a("i6OX"));a("IHUe");var h=a("P5Jw"),C=E(a("GBY4")),y=a("sd4h");function E(e){return e&&e.__esModule?e:{default:e}}var v=(o=function(e){function t(e){(0,d.default)(this,t);var a=(0,u.default)(this,(t.__proto__||(0,c.default)(t)).call(this,e));l.call(a);var o=(0,C.default)(e.location.search,!0).query,r=o.oid,n=o.pid,s=o.mid,i=(localStorage.getItem("userInfo")&&JSON.parse(localStorage.getItem("userInfo")),localStorage.getItem("shopInfo")?JSON.parse(localStorage.getItem("shopInfo")):{});return a.state={oid:r,pid:n,mid:s,copied:!1,card:[],goodsDetail:{},hasError:!1,extractCode:"",shopInfo:i,isPatchCard:!1,hotPro:[]},a}return(0,f.default)(t,e),(0,i.default)(t,[{key:"componentWillMount",value:function(){var e=this.state,t=e.pid,a=e.mid,o=e.shopInfo;this.props.dispatch({type:"detail/getProductById",payload:{productId:t,childCategoryId:a}}),this.getHotCategory(),o.codeKey.toLowerCase()===(configs.xiaomi?configs.xiaomi.toLowerCase():"")&&this.getsecretCard()}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,a=e.detail,o=a.getProductById,l=a.getSecretCard,r=e.pay.getHotCategory;if(r!==t.pay.getHotCategory){var n=r.code,c=r.data;r.message;"1000"===n&&this.setState({hotPro:c.list})}if(o!==t.detail.getProductById){var d=o.code,i=o.data,u=o.message;"1000"===d?this.setState({goodsDetail:i||{}}):s.default.info(u)}if(l!==t.detail.getSecretCard){var f=l.code,m=l.data,p=l.message;"1000"===f?m&&m.list?this.setState({card:m.list}):(this.setState({card:[]}),s.default.info(l.message)):s.default.info(p)}}},{key:"render",value:function(){var e=this,t=this.state,a=t.goodsDetail,o=t.extractCode,l=t.hasError,s=t.card,c=(t.isPatchCard,t.shopInfo),d=t.hotPro,i=this.props.form.getFieldProps;return m.default.createElement("div",{className:"secret-card clearfix"},m.default.createElement(g.default,(0,n.default)({title:"提取卡密"},this.props,{jump:function(){return e.props.history.goBack()},myLoading:!(!this.props.loading||!this.props.loading.effects["detail/getProductById"])})),m.default.createElement("div",{className:"secret-con"},m.default.createElement("div",{className:"d-info"},m.default.createElement("div",{className:"menu-img"},m.default.createElement("img",{src:a.iconPath})),m.default.createElement("div",{className:"menu-t"},m.default.createElement("div",{className:"name"},a.productName),m.default.createElement("div",{className:"price"},a.price,m.default.createElement("small",null,"元"),m.default.createElement("s",null,a.faceValue,"元")))),m.default.createElement("div",{className:"secret-account"},c.codeKey.toLowerCase()!==(configs.xiaomi?configs.xiaomi.toLowerCase():"")&&m.default.createElement("div",{className:"line d-account"},m.default.createElement(r.default,(0,n.default)({},i("extractCode"),{placeholder:"输入6位数字提取码",clear:!0,className:"input-bg",type:"number",value:o,onChange:this.onChange})),l?m.default.createElement("p",{className:"input-tips redfont"},"请输入6位数字的提取码"):m.default.createElement("p",{className:"input-tips"},"请输入您在购买商品时填写的6位数字卡密提取码")),c.codeKey.toLowerCase()!==(configs.xiaomi?configs.xiaomi.toLowerCase():"")&&m.default.createElement("button",{disabled:!o||6!==o.length||!!this.props.loading.models.detail,className:"btn-theme get-btn",onClick:this.getsecretCard},"立即提取")),s&&s.length?m.default.createElement("div",{className:"card-info"},m.default.createElement("h2",null,"卡密信息"),m.default.createElement("div",{className:"crad-con"},s.map(function(t,a){return m.default.createElement("div",{className:"card-line",key:a},c.codeKey.toLowerCase()!==(configs.xiaomi?configs.xiaomi.toLowerCase():"")&&m.default.createElement("p",null,"卡号：",m.default.createElement("span",null,t.cardNumber),m.default.createElement(h.CopyToClipboard,{text:t.cardNumber,onCopy:e.onCopy},m.default.createElement("button",null,"复制"))),m.default.createElement("p",null,"密码：",m.default.createElement("span",null,t.cardPwd),m.default.createElement(h.CopyToClipboard,{text:t.cardPwd,onCopy:e.onCopy},m.default.createElement("button",null,"复制"))))}),m.default.createElement("div",{className:"tips"},"请在",m.default.createElement("span",{className:"themefont"},"官方指定充值渠道"),"处充值，切勿通过他人提供的网站或充值渠道进行充值操作"))):"",m.default.createElement("div",{className:"use-info"},m.default.createElement("p",null,a.content&&a.content.split("|").map(function(e,t){return m.default.createElement("div",{key:t,dangerouslySetInnerHTML:{__html:e}})}))),c.codeKey.toLowerCase()===(configs.xiaomi?configs.xiaomi.toLowerCase():"")&&m.default.createElement("div",{className:"more-bg"},m.default.createElement("div",{className:"more-txt"},"为你精选更多权益"),m.default.createElement("div",{className:"more-pro"},d&&d[0]&&d.map(function(t,a){return a<3&&m.default.createElement("div",{className:"item",onClick:function(){e.toUrl("/detail?gid="+t.childCategoryId)}},m.default.createElement("img",{src:t.iconPath}),m.default.createElement("span",{className:"name"},t.childCategoryName),m.default.createElement("span",{className:"price"},t.price,m.default.createElement("small",null,"元起")))})))))}}]),t}(m.default.Component),l=function(){var e=this;this.getHotCategory=function(){var t=e.state,a=(t.oid,t.shopInfo);e.props.dispatch({type:"pay/getHotCategory",payload:{merchantId:a.merInfoId}})},this.onChange=function(t){6!==t.replace(/\s/g,"").length?e.setState({hasError:!0}):e.setState({hasError:!1}),e.setState({extractCode:t})},this.onCopy=function(t,a){e.setState({copied:!0}),a&&s.default.success("已复制")},this.getsecretCard=function(){var t=e.state,a=t.oid,o=t.extractCode,l=t.shopInfo;e.props.dispatch({type:"detail/getSecretCard",payload:{orderNo:a,extractCode:l.codeKey.toLowerCase()!==(configs.xiaomi?configs.xiaomi.toLowerCase():"")?o:"123456"}})},this.toUrl=function(t){e.props.history.push(t)}},o);t.default=(0,p.connect)(function(e){return(0,n.default)({},e)})((0,y.createForm)()(v))},wrfB:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,l=a("XFOt"),r=(o=l)&&o.__esModule?o:{default:o};t.default=r.default}}]);