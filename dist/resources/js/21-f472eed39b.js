(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{lIh8:function(e,t,a){},nRqt:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l,r,n=b(a("LOOE")),u=b(a("QbLZ")),o=b(a("Kl5d")),d=b(a("gDS+")),c=b(a("Yz+Y")),s=b(a("iCc5")),i=b(a("V7oC")),m=b(a("FYw3")),f=b(a("mRg0"));a("jIel"),a("TttT");var p=b(a("q1tI")),g=a("MuoO"),h=(b(a("17x9")),b(a("Rnav")));b(a("Fzi1")),b(a("i6OX"));a("lIh8");var E=b(a("GBY4")),v=(b(a("1dND")),a("X4fA")),N=b(a("Upkh")),w=b(a("MG2k"));function b(e){return e&&e.__esModule?e:{default:e}}var y=(l=function(e){function t(e){(0,s.default)(this,t);var a=(0,m.default)(this,(t.__proto__||(0,c.default)(t)).call(this,e));r.call(a);var l=(0,E.default)(e.location.search,!0).query.oid,n=localStorage.getItem("shopInfo")?JSON.parse(localStorage.getItem("shopInfo")):{};return a.state={orderDetail:{},oid:l,shopInfo:n,hotPro:[],showMallLoginModal:!1,showLoginPageModal:!1},a}return(0,f.default)(t,e),(0,i.default)(t,[{key:"componentWillMount",value:function(){(0,v.isLoginOrAuth)(this)&&this.getOrderStatus()}},{key:"componentWillReceiveProps",value:function(e){var t=this,a=this.props,l=e.orderDetail.getOrderDetail,r=e.login.fuluusertoken;if(r!==a.login.fuluusertoken){var n=r.code,u=r.data,c=r.message;"1000"===n?(localStorage.setItem("userInfo",(0,d.default)(u)),this.loginSuccess(u)):o.default.fail(c)}if(l!==a.orderDetail.getOrderDetail){var s=l.code,i=l.data,m=l.message;"1000"===s?(15===i.orderStatus||51===i.orderStatus||71===i.orderStatus||setTimeout(function(){t.getOrderStatus()},1e4),this.setState({orderDetail:i})):"-3"===s||"1013"===s||"1014"===s||"1015"===s?this.authorizationFailure():o.default.info(m)}}},{key:"render",value:function(){var e=this,t=this.state,a=t.orderDetail,l=(t.hotPro,t.detail),r=t.showMallLoginModal,o=t.showLoginPageModal,d=t.shopInfo,c="";switch(a.orderStatus){case 11:c="待付款";break;case 15:c="交易关闭";break;case 21:c="付款成功";break;case 31:c="待充值";break;case 41:c="充值中...";break;case 51:c="充值成功";break;case 61:c="充值失败";break;case 71:c="退款成功"}return p.default.createElement("div",{className:"clearfix orderdetail-bg"},p.default.createElement(h.default,(0,u.default)({},this.props,{title:"订单详情",jump:function(){e.props.history.push("/")},myLoading:!!this.props.loading.models.orderDetail})),p.default.createElement("div",{className:"status-top"},p.default.createElement("div",{className:"icon-center orangeBg"},p.default.createElement("div",{className:"img-center status"+a.orderStatus}),p.default.createElement("span",{className:"txt-only"},c))),p.default.createElement("div",{className:"goods-info"},p.default.createElement("div",{className:"list-item"},p.default.createElement("div",{className:"left-img"},p.default.createElement("img",{src:a.productImg,className:"img"})),p.default.createElement("div",{className:"title"},a.productName),p.default.createElement("div",{className:"num"},"￥",a.surePrice)),p.default.createElement("div",{className:"goods-desc"},3===a.productType?p.default.createElement("div",{className:"row"},p.default.createElement("label",null,"充值类型"),p.default.createElement("p",null,"卡密")):p.default.createElement("div",{className:"row"},p.default.createElement("label",null,"充值账号"),p.default.createElement("p",null,a.chargeAccount)),p.default.createElement("div",{className:"row"},p.default.createElement("label",null,"订单编号"),p.default.createElement("p",null,a.orderNo)),p.default.createElement("div",{className:"row"},p.default.createElement("label",null,"下单时间"),p.default.createElement("p",null,a.orderTime)),p.default.createElement("div",{className:"row"},p.default.createElement("label",null,"支付方式"),p.default.createElement("p",null,1===a.payType?"微信支付":2===a.payType?"支付宝支付":4===a.payType?"芒果支付":5===a.payType?"中国银行支付":"未支付")),p.default.createElement("div",{className:"row"},p.default.createElement("label",null,"充值数量"),p.default.createElement("p",null,"x",a.buyNum)),p.default.createElement("div",{className:"row"},p.default.createElement("label",null,"支付金额"),p.default.createElement("p",null,"￥",a.payPrice)),p.default.createElement("div",{className:"row"},p.default.createElement("label",null,"商品总价"),p.default.createElement("p",null,"￥",a.totalPrice)),a.merCouponAmount?p.default.createElement("div",{className:"row"},p.default.createElement("label",null,"优惠券"),p.default.createElement("p",null,"-￥",a.merCouponAmount)):"",p.default.createElement("div",{className:"row"},p.default.createElement("label",null,"服务商家"),p.default.createElement("p",null,"福禄网络科技有限公司")),l&&4===a.productType&&a.chargeGameName?p.default.createElement("div",null,p.default.createElement("div",{className:"row"},p.default.createElement("label",null,"游戏类型"),p.default.createElement("p",null,a.gameType)),p.default.createElement("div",{className:"row"},p.default.createElement("label",null,"充值游戏"),p.default.createElement("p",null,a.chargeGameName)),p.default.createElement("div",{className:"row"},p.default.createElement("label",null,"充值区"),p.default.createElement("p",null,a.chargeGameRegion)),p.default.createElement("div",{className:"row"},p.default.createElement("label",null,"充值服"),p.default.createElement("p",null,a.chargeGameSrv))):"",4===a.productType&&a.chargeGameName&&p.default.createElement("div",{className:"row",onClick:this.show},p.default.createElement("a",{className:"link"},l?p.default.createElement("span",null,"收起详情",p.default.createElement(n.default,{type:"down"})):p.default.createElement("span",null,"查看详情",p.default.createElement(n.default,{type:"right"})))))),p.default.createElement("div",{className:"btn-bg"},d.codeKey.toLowerCase()!==(configs.tencentSH?configs.tencentSH.toLowerCase():"")&&p.default.createElement("button",{className:"toOrder",onClick:function(){e.toUrl("/")}},"返回首页"),p.default.createElement("button",{className:"toIndex",onClick:function(){e.toUrl("/detail?gid="+a.childCategoryId+"&pid="+a.productId)}},"再来一单")),r&&p.default.createElement(N.default,{loginSuccess:this.loginSuccess,hideLoginModal:this.hideLoginModal}),o&&p.default.createElement(w.default,{loginSuccess:this.loginSuccess,hideLoginModal:this.hideLoginModal}))}}]),t}(p.default.Component),r=function(){var e=this;this.loginSuccess=function(t){e.hideLoginModal(),e.getOrderStatus()},this.hideLoginModal=function(){e.setState({showMallLoginModal:!1,showLoginPageModal:!1})},this.authorizationFailure=function(){var t=localStorage.getItem("userInfo")?JSON.parse(localStorage.getItem("userInfo")):{};t.fuluToken="",localStorage.setItem("userInfo",(0,d.default)(t)),(0,v.isLoginOrAuth)(e)},this.getOrderStatus=function(){var t=e.state.oid;e.props.dispatch({type:"orderDetail/getOrderDetail",payload:{OrderNo:t}})},this.toUrl=function(t){e.props.history.push(t)},this.show=function(){var t=e.state.detail;e.setState({detail:!t})}},l);t.default=(0,g.connect)(function(e){return(0,u.default)({},e)})(y)},"y6/d":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l,r=a("nRqt"),n=(l=r)&&l.__esModule?l:{default:l};t.default=n.default}}]);