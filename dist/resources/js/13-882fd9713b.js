(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{"4AsZ":function(e,t,a){},CN8t:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=c(a("Yz+Y")),n=c(a("iCc5")),o=c(a("V7oC")),u=c(a("FYw3")),i=c(a("mRg0")),s=c(a("q1tI"));c(a("17x9"));a("PrFZ");var d=a("i6OX"),r=c(d);function c(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(e){(0,n.default)(this,t);var a=(0,u.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e));a.choose=function(e){a.setState({pathname:e},function(){a.props.history.push(e)})};var o=localStorage.getItem("shopInfo")?JSON.parse(localStorage.getItem("shopInfo")):{};return a.state={pathname:e.location.pathname,shopInfo:o},a}return(0,i.default)(t,e),(0,o.default)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.pathname,l=t.shopInfo;return s.default.createElement("div",null,3!==l.merInfoTemplates.visitType?s.default.createElement("div",{className:"footer-bg clearfix"},s.default.createElement("div",{className:"/"===a?"item active":"item",onClick:function(){e.choose("/")}},s.default.createElement(r.default,{glyph:d.home}),"首页"),s.default.createElement("div",{className:"/my"===a?"item active":"item",onClick:function(){e.choose("/my")}},s.default.createElement(r.default,{glyph:d.user}),"我的")):"")}}]),t}(s.default.Component);t.default=f},Fzi1:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l,n=a("CN8t"),o=(l=n)&&l.__esModule?l:{default:l};t.default=o.default},PrFZ:function(e,t,a){},ZLq1:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=E(a("LajT")),n=E(a("NtIf")),o=E(a("QbLZ")),u=E(a("gDS+")),i=E(a("Kl5d")),s=E(a("YEIV")),d=E(a("Yz+Y")),r=E(a("iCc5")),c=E(a("V7oC")),f=E(a("FYw3")),m=E(a("mRg0"));a("BXRl"),a("9prx"),a("TttT");var p=E(a("q1tI")),h=a("MuoO"),v=(E(a("17x9")),a("sd4h")),g=a("i6OX"),C=E(g);a("4AsZ");var b=E(a("Rnav")),y=E(a("GBY4")),_=E(a("Fzi1"));function E(e){return e&&e.__esModule?e:{default:e}}var I=/^1(3|4|5|6|7|8|9)\d{9}$/,N=null,k=function(e){function t(e){(0,r.default)(this,t);var a=(0,f.default)(this,(t.__proto__||(0,d.default)(t)).call(this,e));a.changeInput=function(e,t){a.setState((0,s.default)({},t,e))},a.onLogin=function(){var e=a.state,t=e.mobile,l=e.code;if(!I.test(t))return alert("请输入正确的手机号码！");var n={mobile:t.replace(/\s/g,""),verCode:l};(0,a.props.dispatch)({type:"login/touristlogin",payload:n})},a.sendCode=function(){var e=a;a.setState({sendCodeTime:60}),N=setInterval(function(){var t=a.state.sendCodeTime;1===t&&clearInterval(N),t-=1,e.setState({sendCodeTime:t})},1e3)},a.sendSmsCode=function(){var e=a.state.mobile;I.test(e)?(0,a.props.dispatch)({type:"login/getCode",payload:{mobile:e.replace(/\s/g,""),loginKey:"login"}}):alert("请输入正确的手机号码！")};var l=(0,y.default)(e.location.search,!0).query.uri;return a.state={mobile:"",code:"",sendCodeTime:0,uri:l},a}return(0,m.default)(t,e),(0,c.default)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this.props,a=e.login;if(a.getCode!==t.login.getCode){var l=a.getCode,n=l.code,o=l.message;"1000"===n?(this.sendCode(),i.default.info("验证码已发送至"+this.state.mobile)):i.default.fail(o)}if(a.touristlogin!==t.login.touristlogin){var s=a.touristlogin,d=s.code,r=s.message,c=s.data;"1000"===d?(i.default.success("登录成功！"),localStorage.setItem("userInfo",(0,u.default)(c)),window.location.href=decodeURI(this.state.uri)):i.default.fail(r)}}},{key:"componentWillUnmount",value:function(){clearInterval(N)}},{key:"render",value:function(){var e=this,t=this.props.form.getFieldProps,a=this.state,u=a.mobile,i=a.code,s=a.sendCodeTime;return p.default.createElement("div",{className:"login-modal"},p.default.createElement(b.default,(0,o.default)({},this.props,{jump:function(){return e.props.history.push("/")},title:"短信验证",myLoading:!!this.props.loading.effects.login})),p.default.createElement("div",{className:"banner"},p.default.createElement("div",{className:"head_img"},p.default.createElement(C.default,{glyph:g.user})),p.default.createElement("div",{className:"right-txt"},p.default.createElement("div",{className:"h1"},"登录"),p.default.createElement("div",{className:"h5"},"请输入手机号登录"))),p.default.createElement("div",{className:"login-bg"},p.default.createElement(n.default,(0,o.default)({},t("mobile"),{placeholder:"输入11位手机号",onChange:function(t){e.changeInput(t,"mobile")},value:u,maxLength:"11"})),p.default.createElement(n.default,(0,o.default)({},t("code"),{placeholder:"输入手机验证码",type:"number",maxLength:"4",onChange:function(t){e.changeInput(t,"code")},value:i,extra:p.default.createElement(l.default,{className:"link",onClick:this.sendSmsCode,disabled:!I.test(u)||I.test(u)&&s>1},s>1?p.default.createElement("span",null,"重新获取(",s,"s)"):p.default.createElement("span",null,"获取验证码"))})),p.default.createElement("div",{className:"btn-bg"},p.default.createElement("button",{className:"btn",onClick:this.onLogin},"登录"))),p.default.createElement(_.default,this.props))}}]),t}(p.default.Component);t.default=(0,h.connect)(function(e){return(0,o.default)({},e)})((0,v.createForm)()(k))},yqq8:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l,n=a("ZLq1"),o=(l=n)&&l.__esModule?l:{default:l};t.default=o.default}}]);