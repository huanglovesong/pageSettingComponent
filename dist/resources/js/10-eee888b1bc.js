(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"6GbQ":function(e,t){e.exports="data:image/png;base64,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"},BOiv:function(e,t,a){},CN8t:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=u(a("Yz+Y")),i=u(a("iCc5")),n=u(a("V7oC")),o=u(a("FYw3")),s=u(a("mRg0")),d=u(a("q1tI"));u(a("17x9"));a("PrFZ");var r=a("i6OX"),c=u(r);function u(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(e){(0,i.default)(this,t);var a=(0,o.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e));a.choose=function(e){a.setState({pathname:e},function(){a.props.history.push(e)})};var n=localStorage.getItem("shopInfo")?JSON.parse(localStorage.getItem("shopInfo")):{};return a.state={pathname:e.location.pathname,shopInfo:n},a}return(0,s.default)(t,e),(0,n.default)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.pathname,l=t.shopInfo;return d.default.createElement("div",null,3!==l.merInfoTemplates.visitType?d.default.createElement("div",{className:"footer-bg clearfix"},d.default.createElement("div",{className:"/"===a?"item active":"item",onClick:function(){e.choose("/")}},d.default.createElement(c.default,{glyph:r.home}),"首页"),d.default.createElement("div",{className:"/my"===a?"item active":"item",onClick:function(){e.choose("/my")}},d.default.createElement(c.default,{glyph:r.user}),"我的")):"")}}]),t}(d.default.Component);t.default=f},Fzi1:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l,i=a("CN8t"),n=(l=i)&&l.__esModule?l:{default:l};t.default=n.default},Lf9Q:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l,i,n=I(a("YEIV")),o=I(a("3UyF")),s=I(a("93ya")),d=I(a("QbLZ")),r=I(a("gDS+")),c=I(a("Kl5d")),u=I(a("Yz+Y")),f=I(a("iCc5")),m=I(a("V7oC")),g=I(a("FYw3")),p=I(a("mRg0"));a("RhWh"),a("wbnQ"),a("TttT");var M=I(a("q1tI")),D=a("MuoO");I(a("17x9"));a("BOiv");var h=I(a("Rnav")),A=a("X4fA"),v=I(a("6GbQ")),Q=I(a("YFHS")),w=I(a("GBY4")),P=I(a("sxGJ")),L=I(a("Upkh"));function I(e){return e&&e.__esModule?e:{default:e}}var N=(l=function(e){function t(e){(0,f.default)(this,t);var a=(0,g.default)(this,(t.__proto__||(0,u.default)(t)).call(this,e));i.call(a);var l=localStorage.getItem("userInfo")?JSON.parse(localStorage.getItem("userInfo")):{},n=localStorage.getItem("shopInfo")?JSON.parse(localStorage.getItem("shopInfo")):{},o=localStorage.getItem("userid"),s=localStorage.getItem("orderNo"),d=localStorage.getItem("eventId");(0,w.default)(e.location.search,!0);return a.timer,a.state={eventId:"null"===d?null:d,userInfo:l,shopInfo:n,userid:o,activeId:"",orderNo:s,dataSource:[{isActive:!0,index:"s0",classText:"p0",proName:"百度网盘 会员30天"},{isActive:!1,index:"s1",classText:"p1",proName:"百度网盘 会员30天"},{isActive:!1,index:"s2",classText:"p2",proName:"百度网盘 会员30天"},{isActive:!1,index:"s7",classText:"p3",proName:"百度网盘 会员30天"},{isActive:!1,index:"s3",classText:"p4",proName:"百度网盘 会员30天"},{isActive:!1,index:"s6",classText:"p5",proName:"百度网盘 会员30天"},{isActive:!1,index:"s5",classText:"p6",proName:"百度网盘 会员30天"},{isActive:!1,index:"s4",classText:"p7",proName:"百度网盘 会员30天"}],showModal:!1,prizeNum:0,errModal:!1,filedModal:!1,entityModal:!1,drawnCount:0,thisindex:0,userlist:[],refreshNum:0,ifopen:!1,showMallLoginModal:!1,showLoginPageModal:!1,myprizelist:0},a}return(0,p.default)(t,e),(0,m.default)(t,[{key:"componentDidMount",value:function(){(0,A.isLoginOrAuth)(this)&&this.init(),new P.default(".gotoexchange"),_czc.push(["_setAutoPageview",!1]),_czc.push(["_trackPageview","/kaishichouj"])}},{key:"init",value:function(){this.props.dispatch({type:"prize/activeOpen",payload:{eventId:this.state.eventId||configs.eventId}}),this.userPrizeList()}},{key:"componentWillReceiveProps",value:function(e){var t=this,a=this.props,l=e.login.fuluusertoken,i=e.prize,n=i.getPrizeNumRes,o=(i.prizeResultRes,i.handlePrizeRes),s=i.prizeProListRes,d=i.userPrizeListRes,u=i.activeOpenRes;if(i.addPrizeNumRes!==a.prize.addPrizeNumRes&&this.getUserPriceNum(),u!==a.prize.activeOpenRes)if("1000"===u.code){var f=this.state.userInfo;1===u.data.enable?(this.props.dispatch({type:"prize/addPrizeNum",payload:{id:u.data.id,eventId:this.state.eventId||configs.eventId,userId:f.fuluId,mobile:f.fuluId}}),this.setState({activeId:u.data.id,ifopen:!0,eventDesc:u.data.eventDesc,eventAnnouncement:u.data.eventAnnouncement,startTime:u.data.eventStartTime.split(" ")[0],endTime:u.data.eventEndTime.split(" ")[0]},function(){t.proList()})):2===u.data.enable&&(this.setState({ifopen:!1}),c.default.fail("活动未开启"))}else if("-3"===u.code||"1013"===u.code||"1014"===u.code||"1015"===u.code){var m=localStorage.getItem("userInfo")?JSON.parse(localStorage.getItem("userInfo")):{};m.fuluToken="",localStorage.setItem("userInfo",(0,r.default)(m)),(0,A.isLoginOrAuth)(this)}if(d!==a.prize.userPrizeListRes&&"1000"===d.code&&this.setState({drawnCount:d.data.drawnCount,userlist:d.data.outDtos}),s!==a.prize.prizeProListRes&&"1000"===s.code&&(s.data.list.length>0&&s.data.list.map(function(e,t){0===t&&(e.isActive=!0),e.isActive=!1}),this.setState({dataSource:s.data.list})),o!==a.prize.handlePrizeRes)if("1000"===o.code){var g=this.state.dataSource;clearInterval(this.timer),g.map(function(e,t){e.isActive=!1,e.id===o.data.producId&&(e.isActive=!0)}),4==o.data.prizeType?this.setState({filedModal:!0,errModal:!1,showModal:!1,entityModal:!1}):5==o.data.prizeType?this.setState({filedModal:!1,errModal:!1,showModal:!1,entityModal:!0,modalData:o.data}):this.setState({filedModal:!1,errModal:!1,showModal:!0,entityModal:!1,modalData:o.data}),this.setState({dataSource:g}),this.getUserPriceNum(),this.userPrizeList()}else if("-3"===o.code||"1013"===o.code||"1014"===o.code||"1015"===o.code){var p=localStorage.getItem("userInfo")?JSON.parse(localStorage.getItem("userInfo")):{};p.fuluToken="",localStorage.setItem("userInfo",(0,r.default)(p)),(0,A.isLoginOrAuth)(this)}else"1020"===o.code?(c.default.fail("抽奖已达上限"),clearInterval(this.timer)):"1021"===o.code?(c.default.fail("今日抽奖已达上限"),clearInterval(this.timer)):(clearInterval(this.timer),this.getUserPriceNum(),this.setState({filedModal:!1,errModal:!0,showModal:!1,entityModal:!1}));if(n!==a.prize.getPrizeNumRes&&"1000"===n.code&&this.setState({prizeNum:n.data.prizeNum}),l!==a.login.fuluusertoken){var M=l.code,D=l.data,h=l.message;"1000"===M?(localStorage.setItem("userInfo",(0,r.default)(D)),this.loginSuccess(),this.init()):c.default.fail(h)}}},{key:"render",value:function(){var e,t,a,l,i=this,r=this.state,c=r.startTime,u=r.endTime,f=r.entityModal,m=r.eventAnnouncement,g=r.eventDesc,p=(r.prizeList,r.dataSource),D=r.showModal,A=(r.prizeNum,r.errModal),w=r.filedModal,P=r.drawnCount,I=r.userlist,N=r.modalData,E=r.showMallLoginModal;r.showLoginPageModal;return M.default.createElement("div",{className:"kaishichouj-bg"},M.default.createElement(h.default,(0,d.default)({},this.props,{jump:function(){i.props.history.goBack()}})),M.default.createElement("div",{className:"pagetitle"}),M.default.createElement("div",{className:"prize-body"},M.default.createElement("p",{className:"prize-usernum"},"已有：",P,"人参与抽奖"),M.default.createElement("div",{className:"prize-roll"},M.default.createElement("div",{className:"draw-section"},p&&p.map(function(e,t){return M.default.createElement("div",{key:t,className:e.isActive?"draw-item active p"+t:"draw-item p"+t},e.prizeImageUrl&&M.default.createElement("img",{src:e.prizeImageUrl,alt:""}),M.default.createElement("p",{className:"item-prize-name"},e.prizeName))}),M.default.createElement("div",{className:"draw-item draw-btn",onClick:function(){i.handleClick()}},M.default.createElement("button",{className:"btn"}),M.default.createElement("p",{className:"draw-times"},"抽奖次数*",this.state.prizeNum)))),M.default.createElement("div",{className:"prize-notice"},I.length>0&&M.default.createElement(s.default,{className:"my-carousel",vertical:!0,dots:!1,dragging:!1,swiping:!1,autoplay:!0,infinite:!0},I.map(function(e,t){return M.default.createElement("div",{key:t,className:"v-item"},"用户: ",e.mobile.substring(0,3)+"*****"+e.mobile.substring(8,11)," 抽中",e.prizeName)}))),M.default.createElement("div",{className:"prize-rule"},M.default.createElement("h1",null,"活动规则"),M.default.createElement("p",null,M.default.createElement("span",null,"活动时间")," ",c," 至 ",u),M.default.createElement("p",null,M.default.createElement("span",null,"活动说明")," ",g&&g),M.default.createElement("p",null,M.default.createElement("span",null,"注意事项")," ",m&&m))),M.default.createElement("div",{onClick:this.myPrize,className:"myprize"}),D&&M.default.createElement(o.default,(e={visible:!0,transparent:!0,maskClosable:!1},(0,n.default)(e,"transparent",!0),(0,n.default)(e,"className","choujiangmodal"),e),N&&M.default.createElement("div",null,M.default.createElement("h1",null),M.default.createElement("img",{src:N.prizeImageUrl}),M.default.createElement("p",{className:"proname"},N.prizeName),M.default.createElement("p",{className:"pro-notice"},"关闭页面后可以通过活动页面下方 我的奖品查看中奖情况"),M.default.createElement("button",{className:"gotoexchange","data-clipboard-text":N.cards,onClick:function(){i.exchange(N.exchangeUrl,N.cards,N.batchType)}},"立即兑换"),M.default.createElement("span",{className:"close",onClick:function(){i.hiddenModal("showModal")}}))),w&&M.default.createElement(o.default,(t={visible:!0,transparent:!0,maskClosable:!1},(0,n.default)(t,"transparent",!0),(0,n.default)(t,"className","choujiangmodal"),t),M.default.createElement("div",null,M.default.createElement("h1",{className:"filedmodal-title"}),M.default.createElement("img",{src:Q.default}),M.default.createElement("p",{className:"proname"},"谢谢参与"),M.default.createElement("p",{className:"pro-notice"},"关闭页面后可以通过活动页面下方 我的奖品查看中奖情况"),M.default.createElement("button",{className:"gotoexchange",onClick:function(){i.hiddenModal("filedModal")}},"知道了"),M.default.createElement("span",{className:"close",onClick:function(){i.hiddenModal("filedModal")}}))),A&&M.default.createElement(o.default,(a={visible:!0,transparent:!0,maskClosable:!1},(0,n.default)(a,"transparent",!0),(0,n.default)(a,"className","choujiangmodal"),a),M.default.createElement("div",null,M.default.createElement("h1",{className:"errmodal-title"}),M.default.createElement("img",{src:v.default}),M.default.createElement("p",{className:"err-mes"},"系统异常"),M.default.createElement("p",{className:"err-mes"},"点击重新抽奖"),M.default.createElement("button",{className:"gotoexchange",onClick:this.againprize},"重新抽奖"),M.default.createElement("span",{className:"close",onClick:function(){i.hiddenModal("errModal")}}))),f&&M.default.createElement(o.default,(l={visible:!0,transparent:!0,maskClosable:!1},(0,n.default)(l,"transparent",!0),(0,n.default)(l,"className","choujiangmodal"),l),N&&M.default.createElement("div",null,M.default.createElement("h1",null),M.default.createElement("img",{src:N.prizeImageUrl}),M.default.createElement("p",{className:"proname"},N.prizeName),M.default.createElement("p",{className:"pro-notice"},"后续会有工作人员和您联系，核对中奖信息，请保持手机畅通"),M.default.createElement("button",{className:"gotoexchange","data-clipboard-text":N.cards,onClick:this.entityexchange},"立即兑换"),M.default.createElement("span",{className:"close",onClick:function(){i.hiddenModal("entityModal")}}))),E&&M.default.createElement(L.default,{loginSuccess:this.loginSuccess,hideLoginModal:this.hideLoginModal}))}}]),t}(M.default.Component),i=function(){var e=this;this.userPrizeList=function(){e.props.dispatch({type:"prize/userPrizeList",payload:{eventId:e.state.eventId||configs.eventId}})},this.proList=function(){e.props.dispatch({type:"prize/prizeProList",payload:{id:e.state.activeId}})},this.myPrize=function(){e.props.history.push("./prizelist")},this.getUserPriceNum=function(){e.props.dispatch({type:"prize/getPrizeNum",payload:{userId:e.state.userInfo.fuluId,eventId:e.state.eventId||configs.eventId,id:e.state.activeId}})},this.loginSuccess=function(){var t=localStorage.getItem("userInfo")?JSON.parse(localStorage.getItem("userInfo")):{};e.setState({userInfo:t},function(){e.init()}),e.hideLoginModal()},this.hideLoginModal=function(){e.setState({showMallLoginModal:!1,showLoginPageModal:!1})},this.toUrl=function(t){e.props.history.push(t)},this.toLogin=function(){e.setState({isOrderList:!1},function(){(0,A.isLoginOrAuth)(e)})},this.againprize=function(){e.hiddenModal("errModal"),e.handleClick()},this.handleClick=function(){var t=e.state,a=t.userInfo,l=t.activeId,i=t.prizeNum;t.ifopen?i>0?(clearInterval(e.timer),e.start(0,999999,50),e.props.dispatch({type:"prize/handlePrize",payload:{id:l,eventId:e.state.eventId||configs.eventId,userId:a.fuluId,mobile:a.fuluId}})):c.default.fail("您的抽奖次数已用完"):c.default.fail("活动未开始")},this.start=function(t,a,l){e.round=0,e.active=t;var i=e.state.dataSource;e.timer=setInterval(function(){if(e.round<a){7===e.active?e.active=0:e.active+=1,e.round+=1;for(var t=0,l=i.length;t<l;t+=1)t===e.active?i[t].isActive=!0:i[t].isActive=!1;e.setState({dataSource:i,activeIndex:e.active})}else setTimeout(function(){e.setState({prizeModal:!0,isDisabled:!1})},1e3),clearInterval(e.timer)},l)},this.hiddenModal=function(t){e.setState((0,n.default)({},t,!1))},this.exchange=function(t,a,l){"3"!==l?e.props.history.push("./mycoupons"):(c.default.success("券码复制成功，请在页面跳转后粘贴使用。",3),setTimeout(function(){window.location.href=t},3e3))},this.entityexchange=function(){e.hiddenModal("entityModal"),c.default.show("稍后会有客服人员联系您，请保持手机畅通。")}},l);t.default=(0,D.connect)(function(e){return(0,d.default)({},e)})(N)},PrFZ:function(e,t,a){},Upkh:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=h(a("3UyF")),i=h(a("LajT")),n=h(a("NtIf")),o=h(a("QbLZ")),s=h(a("gDS+")),d=h(a("Kl5d")),r=h(a("YEIV")),c=h(a("Yz+Y")),u=h(a("iCc5")),f=h(a("V7oC")),m=h(a("FYw3")),g=h(a("mRg0"));a("RhWh"),a("BXRl"),a("9prx"),a("TttT");var p=h(a("q1tI")),M=a("MuoO"),D=(h(a("17x9")),a("sd4h"));h(a("i6OX"));a("dkPK");h(a("Rnav")),h(a("GBY4")),h(a("Fzi1"));function h(e){return e&&e.__esModule?e:{default:e}}var A=/^1(3|4|5|6|7|8|9)\d{9}$/,v=null,Q=function(e){function t(e){(0,u.default)(this,t);var a=(0,m.default)(this,(t.__proto__||(0,c.default)(t)).call(this,e));return a.changeInput=function(e,t){a.setState((0,r.default)({},t,e))},a.onLogin=function(){var e=a.state,t=e.mobile,l=e.code;if(!A.test(t))return d.default.info("请输入正确的手机号码！");if(!l)return d.default.info("请输入验证码！");var i={mobile:t.replace(/\s/g,""),verCode:l};(0,a.props.dispatch)({type:"login/touristlogin",payload:i})},a.sendCode=function(){var e=a;a.setState({sendCodeTime:60}),v=setInterval(function(){var t=a.state.sendCodeTime;1===t&&clearInterval(v),t-=1,e.setState({sendCodeTime:t})},1e3)},a.sendSmsCode=function(){var e=a.state.mobile;if(!A.test(e))return d.default.info("请输入正确的手机号码！");(0,a.props.dispatch)({type:"login/getCode",payload:{mobile:e.replace(/\s/g,""),loginKey:"login"}})},a.onClose=function(){},a.state={mobile:"",code:"",sendCodeTime:0},a}return(0,g.default)(t,e),(0,f.default)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this.props,a=e.login,l=a.touristlogin,i=a.getCode;if(i!==t.login.getCode){var n=i.code,o=i.message;"1000"===n?(this.sendCode(),d.default.info("验证码已发送至"+this.state.mobile)):d.default.fail(o)}if(l!==this.props.login.touristlogin){var r=l.code,c=l.message,u=l.data;"1000"===r?(d.default.success("登录成功！"),localStorage.setItem("userInfo",(0,s.default)(u)),this.props.loginSuccess(u)):d.default.fail(c)}}},{key:"componentWillUnmount",value:function(){clearInterval(v)}},{key:"render",value:function(){var e=this,t=this.props.form.getFieldProps,a=this.state,s=a.mobile,d=a.code,r=a.sendCodeTime;return p.default.createElement(l.default,{className:"mall-login-modal",visible:!0,transparent:!0,width:"6.16rem",maskClosable:!1,closable:!0,onClose:this.props.hideLoginModal,title:"短信验证码登录",footer:[],wrapProps:{onTouchStart:this.onWrapTouchStart},afterClose:function(){alert("afterClose")}},p.default.createElement("div",{className:"login-bg"},p.default.createElement(n.default,(0,o.default)({},t("mobile"),{placeholder:"请输入手机号",onChange:function(t){e.changeInput(t,"mobile")},value:s,onClick:function(e){e.currentTarget.focus()},maxLength:"11"})),p.default.createElement(n.default,(0,o.default)({},t("code"),{placeholder:"输入手机验证码",type:"number",maxLength:"4",onChange:function(t){e.changeInput(t,"code")},value:d,onClick:function(e){e.currentTarget.focus()},extra:p.default.createElement(i.default,{className:"link",onClick:this.sendSmsCode,disabled:!A.test(s)||A.test(s)&&r>1},r>1?p.default.createElement("span",null,"重新获取(",r,"s)"):p.default.createElement("span",null,"获取验证码"))})),p.default.createElement("div",{className:"btn-bg"},p.default.createElement("button",{className:"btn",onClick:this.onLogin},"登录"))))}}]),t}(p.default.Component);t.default=(0,M.connect)(function(e){return(0,o.default)({},e)})((0,D.createForm)()(Q))},X4fA:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isLoginOrAuth=t.authorizationFailure=void 0;var l=n(a("gDS+")),i=n(a("1dND"));function n(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=localStorage.getItem("userInfo")?JSON.parse(localStorage.getItem("userInfo")):"",a=localStorage.getItem("shopInfo")?JSON.parse(localStorage.getItem("shopInfo")):"";if(t&&t.fuluToken||3==a.merInfoTemplates.visitType)return!0;var l=i.default.isAlipayOrWechat(),n=window.location.pathname+window.location.search;if(0===l||1===l)return window.location.href=configs.commonUrl+"?codeKey="+a.codeKey+"&backUrl="+encodeURIComponent(n),!1;if(2===a.merInfoTemplates.visitType)return t.fuluId&&!t.fuluToken?e.props.dispatch({type:"login/fuluusertoken",payload:{code:t.fuluId,env:3,type:!0}}):e.setState({showMallLoginModal:!0}),!1;var o=localStorage.getItem("userid"),s=localStorage.getItem("accesstoken"),d=configs.commonUrl+"?codeKey="+a.codeKey+"&backUrl="+encodeURIComponent(n);return o&&(d=d+"&userid="+o),s&&(d=d+"&accesstoken="+s),window.location.href=d,!1}t.authorizationFailure=function(e){var t=e.state.userInfo;t.fuluToken="",localStorage.setItem("userInfo",(0,l.default)(t)),e.setState({userInfo:t},function(){o(e)})},t.isLoginOrAuth=o},YFHS:function(e,t){e.exports="data:image/png;base64,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"},dkPK:function(e,t,a){},dvvC:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l,i=a("Lf9Q"),n=(l=i)&&l.__esModule?l:{default:l};t.default=n.default}}]);